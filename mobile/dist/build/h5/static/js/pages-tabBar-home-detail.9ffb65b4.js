(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-tabBar-home-detail"],{"11a9":function(t,e,i){var n=i("4bad");e=n(!1),e.push([t.i,".dataease-main[data-v-50c3ddfa]{position:fixed;left:var(--window-left);right:var(--window-right);padding:5px;height:calc(100vh - 10px)}.person-title[data-v-50c3ddfa]{font-weight:700;font-size:15px;text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.article-content[data-v-50c3ddfa]{height:calc(100vh - 110px);margin:5px 0;background:#fff}.card-actions[data-v-50c3ddfa]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;height:45px;border-top:1px #eee solid;background:#fff}.card-actions-item[data-v-50c3ddfa]{display:flex;flex-direction:row;align-items:center}.card-actions-item-text[data-v-50c3ddfa]{font-size:12px;color:#666;margin-left:5px}",""]),t.exports=e},"2ac1":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("4e82"),i("e9c4"),i("c975"),i("d81d"),i("ac1f"),i("5319");var n=i("90b9"),a=i("caf0"),r="/pages/tabBar/home/detail";function o(t){for(var e=[],i=0,n=t.length;i<n;i++)switch(t[i]){case"weixin":e.push({text:"分享到微信好友",id:"weixin",sort:0}),e.push({text:"分享到微信朋友圈",id:"weixin",sort:1});break;default:break}return e.sort((function(t,e){return t.sort-e.sort})),e}var s={data:function(){return{title:"",banner:{},htmlNodes:[],webViewStyles:{progress:{color:"#FF3333"},height:"700px"},url:"",hasStar:!1,refreshCount:0}},onLoad:function(t){var e=t.detailDate||t.payload;try{this.banner=JSON.parse(decodeURIComponent(e)),uni.showLoading({title:"loading"}),this.loadLinkUrl()}catch(i){this.banner=JSON.parse(e)}uni.setNavigationBarTitle({title:this.banner.title}),this.addRecent(),uni.$emit("loadHomeIndex",{index:1}),this.loadStarStatus()},onBackPress:function(t){if(!(this.refreshCount>0))return!1;this.refreshCount-=1,uni.navigateBack()},onShareAppMessage:function(){return{title:this.banner.title,path:r+"?detailDate="+JSON.stringify(this.banner)}},onNavigationBarButtonTap:function(t){var e=this,i=t.index;if(0===i){uni.getProvider({service:"share",success:function(t){if(t.provider&&t.provider.length&&~t.provider.indexOf("weixin")){var i=o(t.provider);uni.showActionSheet({itemList:i.map((function(t){return t.text})),success:function(t){var i=t.tapIndex;uni.share({provider:"weixin",type:0,title:e.banner.title,scene:0===i?"WXSceneSession":"WXSenceTimeline",href:"https://uniapp.dcloud.io/h5"+r+"?detailDate="+JSON.stringify(e.banner),imageUrl:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-dc-site/b6304f00-5168-11eb-bd01-97bc1429a9ff.png"})}})}else uni.showToast({title:"未检测到可用的微信分享服务"})},fail:function(t){uni.showToast({title:"获取分享服务失败"})}})}},methods:{getDetail:function(){uni.request({url:"https://unidemo.dcloud.net.cn/api/news/36kr/"+this.banner.post_id,success:function(t){if(200==t.statusCode)t.data.content.replace(/\\/g,"").replace(/<img/g,'<img style="display:none;"')},fail:function(){console.log("fail")}})},addRecent:function(){var t={id:this.banner.id,title:this.banner.title,index:this.banner.index};(0,n.addRecent)(t)},enshrine:function(){var t=this,e=this.hasStar?a.unstar:a.star;e(this.banner.id).then((function(e){t.hasStar||uni.showToast({icon:"success",title:"收藏成功"}),t.loadStarStatus(),uni.$emit("loadHomeIndex",{index:0})}))},refresh:function(){uni.showLoading({title:"loading"}),this.url=null,this.loadLinkUrl(),this.refreshCount+=1},loadStarStatus:function(){var t=this;(0,a.starStatus)(this.banner.id).then((function(e){t.hasStar=e.data}))},loadLinkUrl:function(){this.url="/tempMobileLink/"+this.banner.id+"/"+(0,n.getToken)();var t=this.url;setTimeout((function(){var e=document.getElementsByTagName("iframe")[0];e.src=t,e.onload=function(t){uni.hideLoading()}}),1e3)},back:function(){var t=getCurrentPages();if(t.length>1)uni.navigateBack(1);else{var e=this.$router.go(-1);void 0==e&&uni.reLaunch({url:"/pages/index/index"})}}}};e.default=s},"684a":function(t,e,i){"use strict";var n=i("de8a"),a=i.n(n);a.a},"7fe8":function(t,e,i){"use strict";i.r(e);var n=i("2ac1"),a=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},b5ef:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={uniList:i("7f33").default,uniListItem:i("4c2b").default,uniIcons:i("2ba46").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page dataease-main"},[i("uni-list",[i("uni-list-item",{staticClass:"person-title",attrs:{title:t.banner.title}})],1),i("v-uni-view",{staticClass:"article-content"},[t.url?i("v-uni-view",[i("v-uni-web-view",{staticStyle:{height:"calc(100vh - 112px)"},attrs:{"webview-styles":t.webViewStyles}})],1):t._e()],1),i("v-uni-view",{staticClass:"card-actions"},[2===t.banner.index?i("v-uni-view",{staticClass:"card-actions-item"}):i("v-uni-view",{staticClass:"card-actions-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.enshrine.apply(void 0,arguments)}}},[t.hasStar?i("uni-icons",{attrs:{type:"star-filled",size:"18",color:"#007AFF"}}):i("uni-icons",{attrs:{type:"star",size:"18",color:"#999"}})],1),i("v-uni-view",{staticClass:"card-actions-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.refresh.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"reload",size:"18",color:"#999"}})],1)],1)],1)},r=[]},bd9e:function(t,e,i){"use strict";i.r(e);var n=i("b5ef"),a=i("7fe8");for(var r in a)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("684a");var o,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"50c3ddfa",null,!1,n["a"],o);e["default"]=u.exports},caf0:function(t,e,i){"use strict";i("7a82");var n=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.linkInfo=u,e.requestDir=o,e.requestHome=r,e.requestMe=s,e.star=c,e.starStatus=f,e.switchLink=d,e.unstar=l;var a=n(i("6cbd"));function r(t){return(0,a.default)({url:"/mobile/home/query",method:"post",loading:!0,data:t})}function o(t){return(0,a.default)({url:"/mobile/dir/query",method:"post",loading:!0,data:t})}function s(){return(0,a.default)({url:"/mobile/me/query",method:"post",loading:!0})}function u(t){return(0,a.default)({url:"/api/link/currentGenerate/"+t,method:"post",loading:!0})}function d(t){return(0,a.default)({url:"/api/link/switchLink",method:"post",loading:!0,data:t})}function c(t){return(0,a.default)({url:"/api/store/"+t,method:"post",loading:!0})}function l(t){return(0,a.default)({url:"/api/store/remove/"+t,method:"post",loading:!0})}function f(t){return(0,a.default)({url:"/api/store/status/"+t,method:"post",loading:!0})}},de8a:function(t,e,i){var n=i("11a9");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("d25892d2",n,!0,{sourceMap:!1,shadowMode:!1})}}]);